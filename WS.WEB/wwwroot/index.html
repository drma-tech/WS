<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#ffffff" />

    <base href="/" />
    <link rel="manifest" href="manifest.webmanifest" />

    <link rel="stylesheet" href="css/app.min.css" />
    <link rel="stylesheet" href="css/custom-app.min.css" />
    <link rel="stylesheet" href="WS.WEB.styles.css" />
    <link rel="apple-touch-icon" sizes="512x512" href="icon/icon-512.png" />
    <link rel="apple-touch-icon" sizes="192x192" href="icon/icon-192.png" />

    <link href="_content/MudBlazor/MudBlazor.min.css" rel="stylesheet" />
    <link href="/fa/css/fontawesome.min.css" rel="stylesheet" />
    <link href="/fa/css/brands.min.css" rel="stylesheet" />
    <link href="/fa/css/solid.min.css" rel="stylesheet" />

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4BSYH92X9W"></script>

    <script src="package/bowser/es5.js"></script> <!--2.13.1-->

    <script type="module" src="js/main.js"></script>
    <script type="module" src="js/utils.js"></script>
    <script type="module" src="js/events.js"></script>
    <script type="module" src="js/services.js"></script>

    <script type="module">
        import { isDev } from "./js/main.js";
        import { notification } from "./js/utils.js";

        // Disable robots for dev environment
        if (isDev) {
            const meta = document.createElement("meta");
            meta.name = "robots";
            meta.content = "noindex, nofollow";
            document.head.appendChild(meta);
        }

        // temporary: remove in the first quarter of 2026
        if (typeof Promise.withResolvers !== "function") {
            notification.showError("Your systemâ€™s web engine is outdated and may not support all features. Please update your device or browser to ensure the best experience.");
            Promise.withResolvers = function () {
                let resolve, reject;
                const promise = new Promise((res, rej) => {
                    resolve = res;
                    reject = rej;
                });
                return { promise, resolve, reject };
            };
        }
    </script>
</head>

<body>
    <div id="app">
        <svg class="loading-progress">
            <circle r="40%" cx="50%" cy="50%" />
            <circle r="40%" cx="50%" cy="50%" />
        </svg>
        <div class="loading-progress-text"></div>
        <div class="loading-message" aria-live="polite"></div>
    </div>

    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="." class="reload">Reload</a>
        <span class="dismiss">ðŸ—™</span>
    </div>

    <noscript>
        <div style="background: #fff3cd; color: #856404; padding: 1em; border: 1px solid #ffeeba; text-align: center;">
            This site requires JavaScript to function properly. Please enable JavaScript in your browser.
        </div>
    </noscript>

    <div id="toast-stack"></div>

    <script src="_content/MudBlazor/MudBlazor.min.js"></script>
    <script src="_content/Toolbelt.Blazor.PWA.Updater.Service/script.min.js"></script>

    <script src="_framework/blazor.webassembly.js"></script>

    <script type="module">
        import { isBot } from "./js/main.js";
        import { notification } from "./js/utils.js";

        //avoid google (and others) search console execute this
        if (!isBot) {
            if (navigator.serviceWorker?.register) {
                navigator.serviceWorker.register('service-worker.js')
                    .catch(err => {
                        notification.showError(`Failed to register the service worker, which may affect platform functionality. Details: ${err.message}`);
                        notification.sendLog(err);
                    });
            }
        }
    </script>
</body>
</html>
