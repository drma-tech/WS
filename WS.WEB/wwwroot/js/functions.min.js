"use strict";function sendLog(n){const t=window.location.hostname==="localhost"?"http://localhost:7071":"";fetch(`${t}/api/public/logger`,{method:"POST",headers:{"Content-Type":"application/json"},body:n}).catch(()=>{})}function share(n){if(!("share"in navigator)||window.isSecureContext===!1){showError("Web Share API not supported.");return}navigator.share({url:n}).then(()=>console.log("Successful share")).catch(n=>showError(n.message))}function jsSaveAsFile(n,t,i){const f=new File([i],n,{type:t}),u=URL.createObjectURL(f),r=document.createElement("a");document.body.appendChild(r);r.href=u;r.download=n;r.target="_self";r.click();URL.revokeObjectURL(u)}function GetLocalStorage(n){return window.localStorage.getItem(n)}function SetLocalStorage(n,t){return typeof n!="string"||typeof t!="string"?(showError("Key/value must be strings"),null):window.localStorage.setItem(n,t)}function TryDetectPlatform(){if(!GetLocalStorage("platform")){const n=document.referrer=="app-info://platform/microsoft-store"||/microsoft-store/i.test(navigator.userAgent),t=/android/i.test(navigator.userAgent),i=/iphone|ipad|ipod/i.test(navigator.userAgent),r=/macintosh|mac os x/i.test(navigator.userAgent),u=/huawei|honor/i.test(navigator.userAgent),f=/xiaomi/i.test(navigator.userAgent);n?SetLocalStorage("platform","windows"):t?SetLocalStorage("platform","play"):i||r?SetLocalStorage("platform","ios"):u?SetLocalStorage("platform","huawei"):f?SetLocalStorage("platform","xiaomi"):SetLocalStorage("platform","webapp")}}function showError(n){if(window.DotNet)try{DotNet.invokeMethodAsync("WS.WEB","ShowError",n)}catch{showToast(n)}else showToast(n)}function showToast(n){const t=document.getElementById("error-container");t&&(t.textContent=n,t.style.display="block",setTimeout(()=>{t.style.display="none"},1e4))}async function detectBrowserFeatures(){const[n,t,i]=await Promise.all([wasmFeatureDetect.simd(),wasmFeatureDetect.bulkMemory(),wasmFeatureDetect.bigInt()]);return n&&t&&i}function showBrowserWarning(){document.body.innerHTML=`
        <div style="display:flex; align-items:center; justify-content:center; min-height:100vh; background:#f0f2f5; font-family:'Segoe UI', Roboto, sans-serif; padding:1rem;">
            <div style="background:#fff; padding:1.2rem; border-radius:16px; box-shadow:0 4px 12px rgba(0,0,0,0.1); width:100%; max-width:380px; text-align:center; color:#333;">
                <div style="font-size:2.2rem; margin-bottom:0.5rem;">⚠️</div>
                <h2 style="font-size:1.3rem; margin-bottom:0.75rem;">Your browser is too old</h2>
                <p style="font-size:1rem; line-height:1.5; margin-bottom:1rem;">
                    This app can’t run on your current browser because it is out of date.
                    Please update your device using the instructions below.
                </p>
                <div style="text-align:left; font-size:1rem; color:#444;">
                    <div style="margin:0.8rem 0; display:flex; align-items:center;">
                        <img src="https://cdn.jsdelivr.net/npm/simple-icons@v11/icons/googleplay.svg" width="22" style="margin-right:8px;" />
                        <span><strong>Android:</strong> update <strong>Google Chrome</strong> in the Play Store</span>
                    </div>
                    <div style="margin:0.8rem 0; display:flex; align-items:center;">
                        <img src="https://cdn.jsdelivr.net/npm/simple-icons@v11/icons/apple.svg" width="22" style="margin-right:8px;" />
                        <span><strong>iOS / macOS:</strong> update your system (Safari is included)</span>
                    </div>
                    <div style="margin:0.8rem 0; display:flex; align-items:center;">
                        <img src="https://cdn.jsdelivr.net/npm/simple-icons@v11/icons/windows.svg" width="22" style="margin-right:8px;" />
                        <span><strong>Windows:</strong> run Windows Update (Edge is included)</span>
                    </div>
                </div>
                <p style="font-size:0.9rem; color:#777; margin-top:1.2rem; text-align:center;">
                    If you cannot update, try opening this app on a newer device.
                </p>
            </div>
        </div>
    `}function getBrowserName(){const n=navigator.userAgent;return n.includes("Firefox/")?"Firefox":n.includes("Edg/")?"Edge":n.includes("Chrome/")?"Chrome":n.includes("Safari/")?"Safari":n.includes("OPR/")?"Opera":n.includes("MSIE")||n.includes("Trident/")?"Internet Explorer":"Unknown"}function getBrowserVersion(){const t=navigator.userAgent,n=RegExp(/(Firefox|Edg|Chrome|Safari|Version)\/([0-9.]+)/).exec(t);return n?n[2]:"unknown"}function getOperatingSystem(){const n=navigator.userAgent;return n.includes("Windows")?"Windows":n.includes("Mac")?"Mac OS":n.includes("Linux")?"Linux":n.includes("Android")?"Android":n.includes("iOS")||n.includes("iPhone")||n.includes("iPad")?"iOS":"Unknown"}