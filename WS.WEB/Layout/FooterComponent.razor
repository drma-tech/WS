@using WS.Shared.Enums
@using WS.WEB.Modules.Support.Resources
@inherits ComponentCore<FooterComponent>

@if ((Support && Breakpoint <= Breakpoint.Sm) || (!Support && Breakpoint > Breakpoint.Sm))
{
    <MudDivider Class="mb-3 mt-10"></MudDivider>
    <MudGrid Justify="Justify.Center" Style="overflow: auto;" Spacing="4">
        <MudItem xs="12" sm="12" md="3">
            <MudList T="string" Color="Color.Surface" Dense="true">
                <MudListSubheader>
                    <MudText Color="Color.Primary" Typo="Typo.subtitle1">
                        @SeoTranslations.AppName
                    </MudText>
                </MudListSubheader>
                <MudListItem Style="text-align: justify" Class="py-0">
                    @SeoTranslations.AppDescriptionShort
                </MudListItem>
                <MudListItem Style="text-align: justify" Class="py-0">
                    @AppStateStatic.Version
                </MudListItem>
            </MudList>
        </MudItem>
        <MudItem xs="12" sm="3" md="2">
            <MudList T="string" Dense="true">
                <MudListSubheader>
                    <MudText Color="Color.Secondary">Company</MudText>
                </MudListSubheader>
                <MudListItem Text="About us" Href="/support/about-us" Class="py-0" Disabled="_blockedActions" />
                <MudListItem Text="Website" Href="https://www.drma-tech.com/" Target="_blank" Class="py-0" />
            </MudList>
        </MudItem>
        @if (Platform == WS.Shared.Enums.Platform.webapp)
        {
            <MudItem xs="12" sm="3" md="2">
                <MudList T="string" Dense="true">
                    <MudListSubheader>
                        <MudText Color="Color.Secondary">Stores</MudText>
                    </MudListSubheader>
                    <MudListItem Text="Microsoft Store" Href="https://apps.microsoft.com/detail/9pcf521f26lz" Class="py-0" Target="_blank" />
                </MudList>
            </MudItem>
        }
        <MudItem xs="12" sm="3" md="2">
            <MudList T="string" Dense="true">
                <MudListSubheader>
                    <MudText Color="Color.Secondary">Support</MudText>
                </MudListSubheader>
                <MudListItem Text="Contact" Href="mailto:support@web-standards.com" Class="py-0" />
                <MudListItem Text="FAQ" Href="/support/faq" Class="py-0" Disabled="_blockedActions" />
            </MudList>
        </MudItem>
        <MudItem xs="12" sm="3" md="2">
            <MudList T="string" Dense="true">
                <MudListSubheader>
                    <MudText Color="Color.Secondary">Legal</MudText>
                </MudListSubheader>
                <MudListItem Text="Terms of Use" Href="/support/terms" Class="py-0" Disabled="_blockedActions" />
                <MudListItem Text="Privacy Policy" Href="/support/privacy" Class="py-0" Disabled="_blockedActions" />
                <MudListItem Text="Credits" Href="/support/credits" Class="py-0" Disabled="_blockedActions" />
            </MudList>
        </MudItem>
    </MudGrid>
}

@code {
    [Parameter] public bool Support { get; set; }
    private bool _blockedActions => Navigation.Uri.Contains("register-user") || Navigation.Uri.Contains("ask-consent");

    private Platform? Platform { get; set; }

    protected override async Task LoadEssentialDataAsync()
    {
        var platform = await JsRuntime.Utils().GetLocalStorage("platform");
        Platform = Enum.Parse<Platform>(platform ?? "webapp");
    }

}
